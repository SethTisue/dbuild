


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using dbuild &mdash; dbuild Documentation</title>
    
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/issuetracker.css" type="text/css" />
    <link rel="stylesheet" href="_static/base.css" type="text/css" />
    <link rel="stylesheet" href="_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="_static/syntax.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="../../versions.js"></script>
    <script type="text/javascript" src="_static/set-versions.js"></script>
    <link rel="top" title="dbuild Documentation" href="index.html" />
    <link rel="next" title="Repositories" href="repositories.html" />
    <link rel="prev" title="Download and Setup" href="download.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="download.html">Download</a></li>
          <li><a href="http://github.com/typesafehub/distributed-build">GitHub Project</a></li>           
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Using dbuild</div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">        
              <li>
                 <span class="divider">|</span> <a href="repositories.html">Repositories</a> <span class="divider">»</span>
              </li>
              <li>
              </li>
              <li>
                <a href="index.html">Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="download.html">Download and Setup</a> <span class="divider">|</span>
              </li>
              <li>
                <select id="versions"><option selected value="0.5.0">Version 0.5.0</option></select>
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <div class="section" id="using-dbuild">
<h1>Using dbuild<a class="headerlink" href="#using-dbuild" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Using dbuild<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The stand-alone <tt class="docutils literal"><span class="pre">dbuild</span></tt> tool is called by specifying on the command line its build configuration file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>bin/dbuild build-file.dbuild
</pre></div>
</div>
<p>The build tool will create, if not existing, a <tt class="docutils literal"><span class="pre">~/.dbuild</span></tt> directory in your home, which stores general
dbuild support files and the local repository cache, and a <tt class="docutils literal"><span class="pre">target</span></tt> in your current directory, which is
used as a staging area for the current build.</p>
<p>Unless specified otherwise, the end results of the build (artifacts and build information) will be stored
into a local repository in <tt class="docutils literal"><span class="pre">~/.dbuild</span></tt>. It is also possible to use a remote Ivy repository as storage;
that is explained later in the section <a class="reference internal" href="repositories.html"><em>Repositories</em></a>.</p>
</div>
<div class="section" id="properties-file">
<h2>Properties file<a class="headerlink" href="#properties-file" title="Permalink to this headline">¶</a></h2>
<p>By default, dbuild will use the file <tt class="docutils literal"><span class="pre">dbuild.properties</span></tt> to retrieve information about its internal
configuration. Normally, there is no need to touch this file, as its contents are only used while the tool
is starting up, and not during the build process itself. However, you can modify this file if you would
like to modify the standard behavior in some way (for instance, relocating the default <tt class="docutils literal"><span class="pre">~/.dbuild</span></tt> directory,
or the location of the Ivy cache it uses). Again, that is only necessary in special cases.</p>
</div>
<div class="section" id="the-build-configuration-file">
<h2>The build configuration file<a class="headerlink" href="#the-build-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The central part of the build tool operation revolves around the build configuration file, which describes
in detail which software projects are involved in the build, which version of each should be used, and many
other aspects of the build process.</p>
<p>The build file is written in a JSON format. The file is parsed by using the Typesafe
<a class="reference external" href="http://github.com/typesafehub/config">config library</a>, therefore the syntax of the file can be simplified
by using the conventions of that library.</p>
<p>The top level of the configuration file is:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;projects&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="o">&lt;</span><span class="nx">dbuild_project1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">dbuild_project2</span><span class="o">&gt;</span><span class="p">,...]</span> <span class="p">}</span>
</pre></div>
</div>
<p>Each of the dbuild projects has the structure:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
 <span class="s2">&quot;name&quot;</span>  <span class="o">:</span> <span class="o">&lt;</span><span class="nx">project</span><span class="o">-</span><span class="nx">name</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="s2">&quot;system&quot;</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">build</span><span class="o">-</span><span class="nx">system</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="s2">&quot;uri&quot;</span>   <span class="o">:</span> <span class="o">&lt;</span><span class="nx">source</span><span class="o">-</span><span class="nx">repository</span><span class="o">-</span><span class="nx">uri</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="s2">&quot;extra&quot;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">optional</span><span class="o">-</span><span class="nx">extra</span><span class="o">-</span><span class="nx">build</span><span class="o">-</span><span class="nx">parameters</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Within a project description:</p>
<dl class="docutils">
<dt>project-name</dt>
<dd>A string identifying the software project. This can be arbitrary, and is only used within dbuild,
although you will want to use something meaningful, like &quot;akka&quot; for Akka, or &quot;scala-arm&quot; for the
Scala ARM project.</dd>
<dt>build-system</dt>
<dd>A string that describes the build mechanism used by this software project. Valid values are currently
&quot;scala&quot; (custom for the Scala project) and &quot;sbt&quot;; additional mechanisms will be added soon (Maven
support is in the works). If not specified, &quot;sbt&quot; is assumed.</dd>
<dt>source-repository-uri</dt>
<dd><p class="first">A string pointing to the source repository for this project. It can be git-based (if the uri begins
with <tt class="docutils literal"><span class="pre">git://</span></tt> or ends with <tt class="docutils literal"><span class="pre">.git</span></tt>), or svn (schemes <tt class="docutils literal"><span class="pre">http://</span></tt>, <tt class="docutils literal"><span class="pre">https://</span></tt>, <tt class="docutils literal"><span class="pre">svn://</span></tt>, only
if an svn repository is detected). Further formats may be added at a later time.</p>
<p>The uri string may optionally be prefixed with a <tt class="docutils literal"><span class="pre">'#'</span></tt> and either a commit hash, an svn version, or a
branch name. For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;uri&quot;</span><span class="o">:</span>  <span class="s2">&quot;git://github.com/scala/scala.git#2.10.x&quot;</span>
</pre></div>
</div>
<p class="last">dbuild will download and extract the most recent available version in the specified branch, or the
exact version or commit in case if specified . If no prefix is added, dbuild will fetch the most recent
version in git master, or svn head.</p>
</dd>
<dt>optional-extra-build-parameters</dt>
<dd>The &quot;extra&quot; component is optional, as are all of its sub-components. Its structure is:</dd>
</dl>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
 <span class="s2">&quot;sbt-version&quot;</span>         <span class="o">:</span> <span class="o">&lt;</span><span class="nx">sbt</span><span class="o">-</span><span class="nx">version</span><span class="o">&gt;</span><span class="p">,</span>
 <span class="s2">&quot;projects&quot;</span>            <span class="o">:</span> <span class="p">[</span> <span class="nx">subproj1</span><span class="p">,</span> <span class="nx">subproj2</span><span class="p">,...</span> <span class="p">]</span>
 <span class="s2">&quot;run-tests&quot;</span>           <span class="o">:</span> <span class="o">&lt;</span><span class="nx">run</span><span class="o">-</span><span class="nx">tests</span><span class="o">&gt;</span>
 <span class="s2">&quot;options&quot;</span>             <span class="o">:</span> <span class="p">[</span> <span class="nx">opt1</span><span class="p">,</span> <span class="nx">opt2</span><span class="p">,...</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each of them is optional, and their meaning is:</p>
<dl class="docutils">
<dt>sbt-version</dt>
<dd>A string that specifies the version of sbt that should be used to compile
this dbuild project.</dd>
<dt>projects</dt>
<dd><p class="first">A sequence of strings that identifies a subset of the sbt subprojects that should be
built within this dbuild project. For instance, you can specify:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;projects&quot;</span><span class="o">:</span>  <span class="p">[</span><span class="s2">&quot;akka-actor&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p class="last">in order to compile only the &quot;akka-actor&quot; sbt project within Akka. Note: make sure to
use double quotes for the subproject names; if you use single quotes, your entry may
be interpreted incorrectly, and possibly silently ignored.</p>
</dd>
<dt>run-tests</dt>
<dd><p class="first">Boolean value: if set to false, the project will be built but no tests will be run.</p>
<p class="last">Normally, each project is built first, then tested; if compilation succeeds but testing
fails, the dbuild run will abort and no artifacts will be stored into the repository.
If you set run-tests to false, however, testing for the affected project will be skipped,
and the artifacts will be published at the end of the compilation stage. This is useful
in case you would like to use the artifacts of a given project, even though its testing
stage is currently failing for whatever reason.</p>
</dd>
<dt>options</dt>
<dd>A sequence of strings; they will be
passed as-is as additional JVM options, while launching the sbt instance that is used
to build this project.</dd>
</dl>
<p><em>Next:</em> <a class="reference internal" href="repositories.html"><em>Repositories</em></a>.</p>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"><ul>
<li><a class="reference internal" href="#">Using dbuild</a><ul>
<li><a class="reference internal" href="#id1">Using dbuild</a></li>
<li><a class="reference internal" href="#properties-file">Properties file</a></li>
<li><a class="reference internal" href="#the-build-configuration-file">The build configuration file</a></li>
</ul>
</li>
</ul>
</div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>  
  

  </body>
</html>